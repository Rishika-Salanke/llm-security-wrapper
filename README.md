This above code only prevents the role switching. Does not work for all the edge test cases.
Modify the code according to the test cases.
